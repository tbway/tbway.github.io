<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        
        <title>Theadora Ballantyne-Way</title>
        <style>
            html, body {
              top: 0%;
              width: 100%;
              height: 100%;
              margin: 0px;
              border: 0;
              overflow: hidden; /*  Disable scrollbars */
              display: block;  /* No floating content on sides */
            }

            #enterText {
                position: absolute;
                top: 50%;
                text-align: center;
                width: 100%;
            }
        </style>
    </head>
    <body width="100%" height="100%">
        <div id="enterText">
            <a href="#">Click the squeezer to enter!</a>
        </div>
        <img id="squeeze" style="visibility:hidden" src="images/faceon.png" alt="The Squeeze">

        <canvas id="myCanvas" style="position:absolute; left:0px; top:00px; border:0px solid #d3d3d3;"/>

        <script>
            var imgWidth
            var imgHeight
            var img = new Image();

            img.addEventListener('load', function() {
              // once the image is loaded:
              imgWidth = img.naturalWidth; // this will be 300
              imgHeight = img.naturalHeight; // this will be 400
            }, false);

            img.src = 'images/faceon.png';
      
            var previousX = 0
            var previousY = 0
            var fadeDirection = 1
            var fadeCountMax = 25
            var fadeCount = fadeCountMax
            var fadeVal = 0
            var newCycle = 1
            var deadZone
            
            var
            // Obtain a reference to the canvas element using its id.
            canvas = document.getElementById('myCanvas'),
            // Obtain a graphics context on the canvas element for drawing.
            ctx = canvas.getContext('2d');

            function initialize() {
                // Register an event listener to call the resizeCanvas() function 
                // each time the window is resized.
                window.addEventListener('resize', resizeCanvas, false);
                // Draw canvas border for the first time.
                resizeCanvas();

                deadZone = imgWidth/2;
                
                // timer to use for animation
                setInterval(function(){ update(); }, 20);
            }

            // Display custom canvas.
            function redraw() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.save();
                ctx.globalAlpha = fadeVal
                ctx.drawImage(img, previousX, previousY);
                ctx.restore();
            }

            // Runs each time the DOM window resize event fires.
            // Resets the canvas dimensions to match window,
            // then draws the new borders accordingly.
            function resizeCanvas() {
                canvas.width = window.innerWidth - 0;
                canvas.height = window.innerHeight - 0;
                redraw();
            }
            
            function move() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.save();
                ctx.globalAlpha = fadeVal
                var offsetX = Math.floor((Math.random() * canvas.width-(2*deadZone)) + deadZone);
                var offsetY = Math.floor((Math.random() * canvas.height-(2*deadZone)) + deadZone);
                offsetX = 100
                offsetY = 100
                ctx.drawImage(img, offsetX, offsetY);
                ctx.restore();
                previousX = offsetX;
                previousY = offsetY;
            }
            
            function fade() {
                if (fadeDirection == 0) {
                    fadeVal -= 1/fadeCountMax;
                } else {
                    fadeVal += 1/fadeCountMax;
                }
                fadeCount--;
                if (fadeCount == 0) {
                    fadeCount = fadeCountMax;
                    fadeDirection ^= 1;
                }
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                if (fadeCount == fadeCountMax && fadeDirection == 1) {
                    newCycle = 1
                    // skip draw, meaning completely transparent
                } else {
                    newCycle = 0
                    ctx.save();
                    ctx.globalAlpha = fadeVal
                    ctx.drawImage(img, previousX, previousY);
                    ctx.restore();
                }
            }
            
            function update() {
                if (newCycle) move()
                fade()
            }
            
            function clicked() {
                window.location.href = 'home.html'
            }
                       
            window.onload = function() {
                initialize();
            }
            
            canvas.onmousedown = function(e){
                if (e.x > previousX && 
                    e.x < (previousX + imgWidth) &&
                    e.y > previousY &&
                    e.y < (previousY + imgHeight))
                {
                    clicked()
                }
            }
        </script>
    </body>
</html>
